[config]
default_to_workspace = false
skip_core_tasks = true

[tasks.ci]
description = "CI task: Runs checks without modifying files"
dependencies = ["fmt-check", "clippy", "test"]

[tasks.run]
description = "Runs the CLI tool with dynamic arguments"
command = "cargo"
# Added '-p granc' to explicitly target the CLI binary in the workspace
args = ["run", "-p", "granc", "${@}"]

[tasks.test]
description = "Runs tests for the granc crate only"
command = "cargo"
args = ["nextest", "run", "--no-fail-fast", "--workspace"]

[tasks.fmt]
description = "Formats all source files"
command = "cargo"
args = ["fmt", "--all"]

[tasks.fmt-check]
description = "Checks formatting without modifying files (fails if unformatted)"
command = "cargo"
args = ["fmt", "--all", "--", "--check"]

[tasks.clippy]
description = "Runs Clippy lints on the workspace"
command = "cargo"
# Added '--workspace' to lint both crates
args = [
  "clippy",
  "--workspace",
  "--all-targets",
  "--all-features",
  "--",
  "-D",
  "warnings",
]
